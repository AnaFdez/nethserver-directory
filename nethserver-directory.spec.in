Name: nethserver-directory
Summary: LDAP backend for user and group accounts
Version: @@VERSION@@
Release: @@RELEASE@@
License: GPL
Source0: %{name}-%{version}.tar.gz
BuildArch: noarch
URL: http://dev.nethesis.it/projects/%{name}

Requires: pam_ldap >= 185-5.el6, nss-pam-ldapd >= 0.7.5-3.el6
Requires: openldap, openldap-clients, openldap-servers
Requires: perl-LDAP = 1:0.40-2.nh
Requires: perl-Crypt-Cracklib
Requires: nethserver-base
# send expiring password warnings: 
Requires: mailx, postfix, anacron

BuildRequires: perl
BuildRequires: nethserver-devtools
BuildRequires: gettext

%description
LDAP backend for user and group accounts

%prep
%setup -q

%build

mkdir -p root%{perl_vendorlib}
mv -v NethServer root%{perl_vendorlib}
mv -v esmith root%{perl_vendorlib}

perl createlinks


%install
rm -rf $RPM_BUILD_ROOT
(cd root   ; find . -depth -not -name '*.orig' -print  | cpio -dump $RPM_BUILD_ROOT)
%{genfilelist} $RPM_BUILD_ROOT \
    > %{name}-%{version}-%{release}-filelist
echo "%doc COPYING" >> %{name}-%{version}-%{release}-filelist

%clean 
rm -rf $RPM_BUILD_ROOT

%files -f %{name}-%{version}-%{release}-filelist
%defattr(-,root,root)

%post
source /etc/nethserver/rpm_hook_functions
event_queue add %{name}-update

%changelog
* Mon Feb 11 2013 Davide Principi <davide.principi@nethesis.it> - 1.1.1-1.ns6
- Disable default group home directory cretion. 
  Refs #1638

* Thu Jan 31 2013 Davide Principi <davide.principi@nethesis.it> - 1.1.0-1.ns6
- NethServer/Directory.pm: added configServiceAccount() method. 
  Refs #1639 -- LDAP service accounts
- Configure default certificate management. 
  Refs #1632


